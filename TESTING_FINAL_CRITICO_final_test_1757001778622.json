{
  "test_id": "final_test_1757001778622",
  "timestamp": "2025-09-04T16:03:23.656Z",
  "type": "FINAL_CRITICAL_TESTING",
  "executive_summary": {
    "total_critical_tables_tested": 40,
    "functional_tables": 11,
    "blocked_tables": 29,
    "overall_functionality_score": 28,
    "system_status": "REQUIRES_MAJOR_FIXES",
    "testing_time_ms": 25030
  },
  "connectivity": {
    "success": true,
    "status_code": 200,
    "message": "Conectividad OK",
    "tested_at": "2025-09-04T16:02:59.453Z"
  },
  "detailed_results": {
    "actividades_dpo": {
      "table_name": "actividades_dpo",
      "select_success": true,
      "insert_success": false,
      "update_success": false,
      "delete_success": false,
      "rls_detected": false,
      "primary_error": null,
      "operations": {
        "select": {
          "success": true,
          "message": "SELECT OK"
        },
        "insert": {
          "success": false,
          "message": "Could not find the 'updated_at' column of 'actividades_dpo' in the schema cache",
          "data_used": {
            "created_at": "2025-09-04T16:02:59.720Z",
            "updated_at": "2025-09-04T16:02:59.720Z",
            "tenant_id": 1,
            "tipo_actividad": "TEST",
            "descripcion": "Test activity final_te",
            "estado": "PENDIENTE",
            "prioridad": "MEDIA"
          }
        }
      },
      "tested_at": "2025-09-04T16:02:59.454Z"
    },
    "activities": {
      "table_name": "activities",
      "select_success": true,
      "insert_success": false,
      "update_success": false,
      "delete_success": false,
      "rls_detected": false,
      "primary_error": null,
      "operations": {
        "select": {
          "success": true,
          "message": "SELECT OK"
        },
        "insert": {
          "success": false,
          "message": "Could not find the 'updated_at' column of 'activities' in the schema cache",
          "data_used": {
            "created_at": "2025-09-04T16:03:00.332Z",
            "updated_at": "2025-09-04T16:03:00.332Z",
            "tenant_id": 1,
            "action": "TEST_ACTION",
            "details": "Test activity final_te"
          }
        }
      },
      "tested_at": "2025-09-04T16:03:00.073Z"
    },
    "agent_activity_log": {
      "table_name": "agent_activity_log",
      "select_success": true,
      "insert_success": false,
      "update_success": false,
      "delete_success": false,
      "rls_detected": false,
      "primary_error": null,
      "operations": {
        "select": {
          "success": true,
          "message": "SELECT OK"
        },
        "insert": {
          "success": false,
          "message": "Could not find the 'data' column of 'agent_activity_log' in the schema cache",
          "data_used": {
            "created_at": "2025-09-04T16:03:00.894Z",
            "updated_at": "2025-09-04T16:03:00.894Z",
            "tenant_id": 1,
            "data": {
              "test": true,
              "table": "agent_activity_log",
              "id": "final_te"
            }
          }
        }
      },
      "tested_at": "2025-09-04T16:03:00.672Z"
    },
    "audit_log": {
      "table_name": "audit_log",
      "select_success": true,
      "insert_success": false,
      "update_success": false,
      "delete_success": false,
      "rls_detected": false,
      "primary_error": null,
      "operations": {
        "select": {
          "success": true,
          "message": "SELECT OK"
        },
        "insert": {
          "success": false,
          "message": "Could not find the 'updated_at' column of 'audit_log' in the schema cache",
          "data_used": {
            "created_at": "2025-09-04T16:03:01.431Z",
            "updated_at": "2025-09-04T16:03:01.431Z",
            "tenant_id": 1,
            "action": "TEST",
            "table_name": "test_table",
            "success": true
          }
        }
      },
      "tested_at": "2025-09-04T16:03:01.230Z"
    },
    "audit_logs": {
      "table_name": "audit_logs",
      "select_success": true,
      "insert_success": false,
      "update_success": false,
      "delete_success": false,
      "rls_detected": false,
      "primary_error": null,
      "operations": {
        "select": {
          "success": true,
          "message": "SELECT OK"
        },
        "insert": {
          "success": false,
          "message": "Could not find the 'data' column of 'audit_logs' in the schema cache",
          "data_used": {
            "created_at": "2025-09-04T16:03:02.022Z",
            "updated_at": "2025-09-04T16:03:02.022Z",
            "tenant_id": 1,
            "data": {
              "test": true,
              "table": "audit_logs",
              "id": "final_te"
            }
          }
        }
      },
      "tested_at": "2025-09-04T16:03:01.820Z"
    },
    "categories": {
      "table_name": "categories",
      "select_success": true,
      "insert_success": false,
      "update_success": false,
      "delete_success": false,
      "rls_detected": false,
      "primary_error": null,
      "operations": {
        "select": {
          "success": true,
          "message": "SELECT OK"
        },
        "insert": {
          "success": false,
          "message": "Could not find the 'data' column of 'categories' in the schema cache",
          "data_used": {
            "created_at": "2025-09-04T16:03:02.639Z",
            "updated_at": "2025-09-04T16:03:02.639Z",
            "tenant_id": 1,
            "data": {
              "test": true,
              "table": "categories",
              "id": "final_te"
            }
          }
        }
      },
      "tested_at": "2025-09-04T16:03:02.446Z"
    },
    "compliance_records": {
      "table_name": "compliance_records",
      "select_success": true,
      "insert_success": true,
      "update_success": true,
      "delete_success": true,
      "rls_detected": false,
      "primary_error": null,
      "operations": {
        "select": {
          "success": true,
          "message": "SELECT OK"
        },
        "insert": {
          "success": true,
          "message": "INSERT OK",
          "data_used": {
            "created_at": "2025-09-04T16:03:03.173Z",
            "updated_at": "2025-09-04T16:03:03.173Z",
            "tenant_id": 1,
            "data": {
              "test": true,
              "id": "final_te"
            }
          }
        },
        "update": {
          "success": true,
          "message": "UPDATE OK"
        },
        "delete": {
          "success": true,
          "message": "DELETE OK"
        }
      },
      "tested_at": "2025-09-04T16:03:02.981Z"
    },
    "compliance_reports": {
      "table_name": "compliance_reports",
      "select_success": true,
      "insert_success": true,
      "update_success": true,
      "delete_success": true,
      "rls_detected": false,
      "primary_error": null,
      "operations": {
        "select": {
          "success": true,
          "message": "SELECT OK"
        },
        "insert": {
          "success": true,
          "message": "INSERT OK",
          "data_used": {
            "created_at": "2025-09-04T16:03:04.137Z",
            "updated_at": "2025-09-04T16:03:04.137Z",
            "tenant_id": 1,
            "data": {
              "test": true,
              "id": "final_te"
            }
          }
        },
        "update": {
          "success": true,
          "message": "UPDATE OK"
        },
        "delete": {
          "success": true,
          "message": "DELETE OK"
        }
      },
      "tested_at": "2025-09-04T16:03:03.927Z"
    },
    "documentos_generados": {
      "table_name": "documentos_generados",
      "select_success": true,
      "insert_success": false,
      "update_success": false,
      "delete_success": false,
      "rls_detected": false,
      "primary_error": null,
      "operations": {
        "select": {
          "success": true,
          "message": "SELECT OK"
        },
        "insert": {
          "success": false,
          "message": "Could not find the 'data' column of 'documentos_generados' in the schema cache",
          "data_used": {
            "created_at": "2025-09-04T16:03:05.094Z",
            "updated_at": "2025-09-04T16:03:05.094Z",
            "tenant_id": 1,
            "data": {
              "test": true,
              "table": "documentos_generados",
              "id": "final_te"
            }
          }
        }
      },
      "tested_at": "2025-09-04T16:03:04.887Z"
    },
    "dpa_documents": {
      "table_name": "dpa_documents",
      "select_success": true,
      "insert_success": true,
      "update_success": true,
      "delete_success": true,
      "rls_detected": false,
      "primary_error": null,
      "operations": {
        "select": {
          "success": true,
          "message": "SELECT OK"
        },
        "insert": {
          "success": true,
          "message": "INSERT OK",
          "data_used": {
            "created_at": "2025-09-04T16:03:05.610Z",
            "updated_at": "2025-09-04T16:03:05.610Z",
            "tenant_id": 1,
            "data": {
              "test": true,
              "id": "final_te"
            }
          }
        },
        "update": {
          "success": true,
          "message": "UPDATE OK"
        },
        "delete": {
          "success": true,
          "message": "DELETE OK"
        }
      },
      "tested_at": "2025-09-04T16:03:05.420Z"
    },
    "dpas": {
      "table_name": "dpas",
      "select_success": true,
      "insert_success": false,
      "update_success": false,
      "delete_success": false,
      "rls_detected": false,
      "primary_error": null,
      "operations": {
        "select": {
          "success": true,
          "message": "SELECT OK"
        },
        "insert": {
          "success": false,
          "message": "Could not find the 'data' column of 'dpas' in the schema cache",
          "data_used": {
            "created_at": "2025-09-04T16:03:06.500Z",
            "updated_at": "2025-09-04T16:03:06.500Z",
            "tenant_id": 1,
            "data": {
              "test": true,
              "table": "dpas",
              "id": "final_te"
            }
          }
        }
      },
      "tested_at": "2025-09-04T16:03:06.305Z"
    },
    "dpia": {
      "table_name": "dpia",
      "select_success": true,
      "insert_success": false,
      "update_success": false,
      "delete_success": false,
      "rls_detected": false,
      "primary_error": null,
      "operations": {
        "select": {
          "success": true,
          "message": "SELECT OK"
        },
        "insert": {
          "success": false,
          "message": "Could not find the 'data' column of 'dpia' in the schema cache",
          "data_used": {
            "created_at": "2025-09-04T16:03:07.012Z",
            "updated_at": "2025-09-04T16:03:07.012Z",
            "tenant_id": 1,
            "data": {
              "test": true,
              "table": "dpia",
              "id": "final_te"
            }
          }
        }
      },
      "tested_at": "2025-09-04T16:03:06.827Z"
    },
    "dpo_notifications": {
      "table_name": "dpo_notifications",
      "select_success": true,
      "insert_success": false,
      "update_success": false,
      "delete_success": false,
      "rls_detected": false,
      "primary_error": null,
      "operations": {
        "select": {
          "success": true,
          "message": "SELECT OK"
        },
        "insert": {
          "success": false,
          "message": "Could not find the 'data' column of 'dpo_notifications' in the schema cache",
          "data_used": {
            "created_at": "2025-09-04T16:03:07.530Z",
            "updated_at": "2025-09-04T16:03:07.530Z",
            "tenant_id": 1,
            "data": {
              "test": true,
              "table": "dpo_notifications",
              "id": "final_te"
            }
          }
        }
      },
      "tested_at": "2025-09-04T16:03:07.359Z"
    },
    "eipd_documents": {
      "table_name": "eipd_documents",
      "select_success": true,
      "insert_success": true,
      "update_success": true,
      "delete_success": true,
      "rls_detected": false,
      "primary_error": null,
      "operations": {
        "select": {
          "success": true,
          "message": "SELECT OK"
        },
        "insert": {
          "success": true,
          "message": "INSERT OK",
          "data_used": {
            "created_at": "2025-09-04T16:03:08.032Z",
            "updated_at": "2025-09-04T16:03:08.032Z",
            "tenant_id": 1,
            "data": {
              "test": true,
              "table": "eipd_documents",
              "id": "final_te"
            }
          }
        },
        "update": {
          "success": true,
          "message": "UPDATE OK"
        },
        "delete": {
          "success": true,
          "message": "DELETE OK"
        }
      },
      "tested_at": "2025-09-04T16:03:07.847Z"
    },
    "empresas": {
      "table_name": "empresas",
      "select_success": true,
      "insert_success": false,
      "update_success": false,
      "delete_success": false,
      "rls_detected": false,
      "primary_error": null,
      "operations": {
        "select": {
          "success": true,
          "message": "SELECT OK"
        },
        "insert": {
          "success": false,
          "message": "Could not find the 'data' column of 'empresas' in the schema cache",
          "data_used": {
            "created_at": "2025-09-04T16:03:08.963Z",
            "updated_at": "2025-09-04T16:03:08.963Z",
            "tenant_id": 1,
            "data": {
              "test": true,
              "table": "empresas",
              "id": "final_te"
            }
          }
        }
      },
      "tested_at": "2025-09-04T16:03:08.766Z"
    },
    "evaluaciones_impacto": {
      "table_name": "evaluaciones_impacto",
      "select_success": true,
      "insert_success": false,
      "update_success": false,
      "delete_success": false,
      "rls_detected": false,
      "primary_error": null,
      "operations": {
        "select": {
          "success": true,
          "message": "SELECT OK"
        },
        "insert": {
          "success": false,
          "message": "Could not find the 'data' column of 'evaluaciones_impacto' in the schema cache",
          "data_used": {
            "created_at": "2025-09-04T16:03:09.504Z",
            "updated_at": "2025-09-04T16:03:09.504Z",
            "tenant_id": 1,
            "data": {
              "test": true,
              "table": "evaluaciones_impacto",
              "id": "final_te"
            }
          }
        }
      },
      "tested_at": "2025-09-04T16:03:09.319Z"
    },
    "generated_documents": {
      "table_name": "generated_documents",
      "select_success": true,
      "insert_success": false,
      "update_success": false,
      "delete_success": false,
      "rls_detected": false,
      "primary_error": null,
      "operations": {
        "select": {
          "success": true,
          "message": "SELECT OK"
        },
        "insert": {
          "success": false,
          "message": "Could not find the 'data' column of 'generated_documents' in the schema cache",
          "data_used": {
            "created_at": "2025-09-04T16:03:10.025Z",
            "updated_at": "2025-09-04T16:03:10.025Z",
            "tenant_id": 1,
            "data": {
              "test": true,
              "id": "final_te"
            }
          }
        }
      },
      "tested_at": "2025-09-04T16:03:09.846Z"
    },
    "legal_articles": {
      "table_name": "legal_articles",
      "select_success": true,
      "insert_success": false,
      "update_success": false,
      "delete_success": false,
      "rls_detected": false,
      "primary_error": null,
      "operations": {
        "select": {
          "success": true,
          "message": "SELECT OK"
        },
        "insert": {
          "success": false,
          "message": "Could not find the 'data' column of 'legal_articles' in the schema cache",
          "data_used": {
            "created_at": "2025-09-04T16:03:10.522Z",
            "updated_at": "2025-09-04T16:03:10.522Z",
            "tenant_id": 1,
            "data": {
              "test": true,
              "table": "legal_articles",
              "id": "final_te"
            }
          }
        }
      },
      "tested_at": "2025-09-04T16:03:10.349Z"
    },
    "mapeo_datos_rat": {
      "table_name": "mapeo_datos_rat",
      "select_success": true,
      "insert_success": true,
      "update_success": true,
      "delete_success": true,
      "rls_detected": false,
      "primary_error": null,
      "operations": {
        "select": {
          "success": true,
          "message": "SELECT OK"
        },
        "insert": {
          "success": true,
          "message": "INSERT OK",
          "data_used": {
            "created_at": "2025-09-04T16:03:11.100Z",
            "updated_at": "2025-09-04T16:03:11.100Z",
            "tenant_id": 1,
            "nombre_actividad": "Test RAT final_te",
            "descripcion": "Test mapping final_te",
            "estado": "BORRADOR"
          }
        },
        "update": {
          "success": true,
          "message": "UPDATE OK"
        },
        "delete": {
          "success": true,
          "message": "DELETE OK"
        }
      },
      "tested_at": "2025-09-04T16:03:10.912Z"
    },
    "notifications": {
      "table_name": "notifications",
      "select_success": true,
      "insert_success": false,
      "update_success": false,
      "delete_success": false,
      "rls_detected": false,
      "primary_error": null,
      "operations": {
        "select": {
          "success": true,
          "message": "SELECT OK"
        },
        "insert": {
          "success": false,
          "message": "Could not find the 'updated_at' column of 'notifications' in the schema cache",
          "data_used": {
            "created_at": "2025-09-04T16:03:11.985Z",
            "updated_at": "2025-09-04T16:03:11.985Z",
            "tenant_id": 1,
            "data": {
              "test": true,
              "table": "notifications",
              "id": "final_te"
            }
          }
        }
      },
      "tested_at": "2025-09-04T16:03:11.811Z"
    },
    "organizaciones": {
      "table_name": "organizaciones",
      "select_success": true,
      "insert_success": false,
      "update_success": false,
      "delete_success": false,
      "rls_detected": true,
      "primary_error": null,
      "operations": {
        "select": {
          "success": true,
          "message": "SELECT OK"
        },
        "insert": {
          "success": false,
          "message": "new row violates row-level security policy for table \"organizaciones\"",
          "data_used": {
            "created_at": "2025-09-04T16:03:12.514Z",
            "updated_at": "2025-09-04T16:03:12.514Z",
            "company_name": "Test Org final_te",
            "display_name": "Test Display final_te",
            "industry": "Technology",
            "size": "Small",
            "country": "Chile",
            "active": true
          },
          "rls_blocked": true
        }
      },
      "tested_at": "2025-09-04T16:03:12.337Z"
    },
    "partner_access_logs": {
      "table_name": "partner_access_logs",
      "select_success": true,
      "insert_success": false,
      "update_success": false,
      "delete_success": false,
      "rls_detected": false,
      "primary_error": null,
      "operations": {
        "select": {
          "success": true,
          "message": "SELECT OK"
        },
        "insert": {
          "success": false,
          "message": "Could not find the 'created_at' column of 'partner_access_logs' in the schema cache",
          "data_used": {
            "created_at": "2025-09-04T16:03:13.039Z",
            "updated_at": "2025-09-04T16:03:13.039Z",
            "tenant_id": 1,
            "data": {
              "test": true,
              "table": "partner_access_logs",
              "id": "final_te"
            }
          }
        }
      },
      "tested_at": "2025-09-04T16:03:12.848Z"
    },
    "proveedores": {
      "table_name": "proveedores",
      "select_success": true,
      "insert_success": false,
      "update_success": false,
      "delete_success": false,
      "rls_detected": true,
      "primary_error": null,
      "operations": {
        "select": {
          "success": true,
          "message": "SELECT OK"
        },
        "insert": {
          "success": false,
          "message": "new row violates row-level security policy for table \"proveedores\"",
          "data_used": {
            "created_at": "2025-09-04T16:03:13.626Z",
            "updated_at": "2025-09-04T16:03:13.626Z",
            "tenant_id": 1,
            "nombre": "Test Provider final_te",
            "tipo": "TECNOLOGIA",
            "pais": "Chile"
          },
          "rls_blocked": true
        }
      },
      "tested_at": "2025-09-04T16:03:13.389Z"
    },
    "rat_proveedores": {
      "table_name": "rat_proveedores",
      "select_success": true,
      "insert_success": false,
      "update_success": false,
      "delete_success": false,
      "rls_detected": false,
      "primary_error": null,
      "operations": {
        "select": {
          "success": true,
          "message": "SELECT OK"
        },
        "insert": {
          "success": false,
          "message": "Could not find the 'data' column of 'rat_proveedores' in the schema cache",
          "data_used": {
            "created_at": "2025-09-04T16:03:14.133Z",
            "updated_at": "2025-09-04T16:03:14.133Z",
            "tenant_id": 1,
            "data": {
              "test": true,
              "table": "rat_proveedores",
              "id": "final_te"
            }
          }
        }
      },
      "tested_at": "2025-09-04T16:03:13.963Z"
    },
    "rats": {
      "table_name": "rats",
      "select_success": true,
      "insert_success": false,
      "update_success": false,
      "delete_success": false,
      "rls_detected": false,
      "primary_error": null,
      "operations": {
        "select": {
          "success": true,
          "message": "SELECT OK"
        },
        "insert": {
          "success": false,
          "message": "Could not find the 'data' column of 'rats' in the schema cache",
          "data_used": {
            "created_at": "2025-09-04T16:03:14.628Z",
            "updated_at": "2025-09-04T16:03:14.628Z",
            "tenant_id": 1,
            "data": {
              "test": true,
              "table": "rats",
              "id": "final_te"
            }
          }
        }
      },
      "tested_at": "2025-09-04T16:03:14.456Z"
    },
    "reports": {
      "table_name": "reports",
      "select_success": true,
      "insert_success": false,
      "update_success": false,
      "delete_success": false,
      "rls_detected": false,
      "primary_error": null,
      "operations": {
        "select": {
          "success": true,
          "message": "SELECT OK"
        },
        "insert": {
          "success": false,
          "message": "Could not find the 'data' column of 'reports' in the schema cache",
          "data_used": {
            "created_at": "2025-09-04T16:03:15.152Z",
            "updated_at": "2025-09-04T16:03:15.152Z",
            "tenant_id": 1,
            "data": {
              "test": true,
              "table": "reports",
              "id": "final_te"
            }
          }
        }
      },
      "tested_at": "2025-09-04T16:03:14.973Z"
    },
    "system_alerts": {
      "table_name": "system_alerts",
      "select_success": true,
      "insert_success": false,
      "update_success": false,
      "delete_success": false,
      "rls_detected": false,
      "primary_error": null,
      "operations": {
        "select": {
          "success": true,
          "message": "SELECT OK"
        },
        "insert": {
          "success": false,
          "message": "Could not find the 'updated_at' column of 'system_alerts' in the schema cache",
          "data_used": {
            "created_at": "2025-09-04T16:03:15.679Z",
            "updated_at": "2025-09-04T16:03:15.679Z",
            "tenant_id": 1,
            "data": {
              "test": true,
              "table": "system_alerts",
              "id": "final_te"
            }
          }
        }
      },
      "tested_at": "2025-09-04T16:03:15.499Z"
    },
    "system_config": {
      "table_name": "system_config",
      "select_success": true,
      "insert_success": true,
      "update_success": true,
      "delete_success": true,
      "rls_detected": false,
      "primary_error": null,
      "operations": {
        "select": {
          "success": true,
          "message": "SELECT OK"
        },
        "insert": {
          "success": true,
          "message": "INSERT OK",
          "data_used": {
            "created_at": "2025-09-04T16:03:16.178Z",
            "updated_at": "2025-09-04T16:03:16.178Z",
            "key": "test_config_final_te",
            "value": "test_value",
            "description": "Test configuration"
          }
        },
        "update": {
          "success": true,
          "message": "UPDATE OK"
        },
        "delete": {
          "success": true,
          "message": "DELETE OK"
        }
      },
      "tested_at": "2025-09-04T16:03:16.006Z"
    },
    "system_error_logs": {
      "table_name": "system_error_logs",
      "select_success": false,
      "insert_success": false,
      "update_success": false,
      "delete_success": false,
      "rls_detected": false,
      "primary_error": "unrecognized configuration parameter \"rls.tenant_id\"",
      "operations": {
        "select": {
          "success": false,
          "message": "unrecognized configuration parameter \"rls.tenant_id\""
        }
      },
      "tested_at": "2025-09-04T16:03:16.886Z"
    },
    "tenant_configs": {
      "table_name": "tenant_configs",
      "select_success": true,
      "insert_success": false,
      "update_success": false,
      "delete_success": false,
      "rls_detected": false,
      "primary_error": null,
      "operations": {
        "select": {
          "success": true,
          "message": "SELECT OK"
        },
        "insert": {
          "success": false,
          "message": "Could not find the 'data' column of 'tenant_configs' in the schema cache",
          "data_used": {
            "created_at": "2025-09-04T16:03:17.401Z",
            "updated_at": "2025-09-04T16:03:17.401Z",
            "tenant_id": 1,
            "data": {
              "test": true,
              "table": "tenant_configs",
              "id": "final_te"
            }
          }
        }
      },
      "tested_at": "2025-09-04T16:03:17.224Z"
    },
    "tenant_limits": {
      "table_name": "tenant_limits",
      "select_success": true,
      "insert_success": false,
      "update_success": false,
      "delete_success": false,
      "rls_detected": false,
      "primary_error": null,
      "operations": {
        "select": {
          "success": true,
          "message": "SELECT OK"
        },
        "insert": {
          "success": false,
          "message": "Could not find the 'data' column of 'tenant_limits' in the schema cache",
          "data_used": {
            "created_at": "2025-09-04T16:03:17.968Z",
            "updated_at": "2025-09-04T16:03:17.968Z",
            "tenant_id": 1,
            "data": {
              "test": true,
              "table": "tenant_limits",
              "id": "final_te"
            }
          }
        }
      },
      "tested_at": "2025-09-04T16:03:17.762Z"
    },
    "tenant_settings": {
      "table_name": "tenant_settings",
      "select_success": true,
      "insert_success": false,
      "update_success": false,
      "delete_success": false,
      "rls_detected": false,
      "primary_error": null,
      "operations": {
        "select": {
          "success": true,
          "message": "SELECT OK"
        },
        "insert": {
          "success": false,
          "message": "Could not find the 'data' column of 'tenant_settings' in the schema cache",
          "data_used": {
            "created_at": "2025-09-04T16:03:18.478Z",
            "updated_at": "2025-09-04T16:03:18.478Z",
            "tenant_id": 1,
            "data": {
              "test": true,
              "table": "tenant_settings",
              "id": "final_te"
            }
          }
        }
      },
      "tested_at": "2025-09-04T16:03:18.303Z"
    },
    "tenant_usage": {
      "table_name": "tenant_usage",
      "select_success": true,
      "insert_success": false,
      "update_success": false,
      "delete_success": false,
      "rls_detected": false,
      "primary_error": null,
      "operations": {
        "select": {
          "success": true,
          "message": "SELECT OK"
        },
        "insert": {
          "success": false,
          "message": "Could not find the 'created_at' column of 'tenant_usage' in the schema cache",
          "data_used": {
            "created_at": "2025-09-04T16:03:19.017Z",
            "updated_at": "2025-09-04T16:03:19.017Z",
            "tenant_id": 1,
            "data": {
              "test": true,
              "table": "tenant_usage",
              "id": "final_te"
            }
          }
        }
      },
      "tested_at": "2025-09-04T16:03:18.798Z"
    },
    "tenants": {
      "table_name": "tenants",
      "select_success": true,
      "insert_success": false,
      "update_success": false,
      "delete_success": false,
      "rls_detected": false,
      "primary_error": null,
      "operations": {
        "select": {
          "success": true,
          "message": "SELECT OK"
        },
        "insert": {
          "success": false,
          "message": "Could not find the 'data' column of 'tenants' in the schema cache",
          "data_used": {
            "created_at": "2025-09-04T16:03:19.568Z",
            "updated_at": "2025-09-04T16:03:19.568Z",
            "tenant_id": 1,
            "data": {
              "test": true,
              "table": "tenants",
              "id": "final_te"
            }
          }
        }
      },
      "tested_at": "2025-09-04T16:03:19.368Z"
    },
    "user_help_stats": {
      "table_name": "user_help_stats",
      "select_success": true,
      "insert_success": true,
      "update_success": true,
      "delete_success": true,
      "rls_detected": false,
      "primary_error": null,
      "operations": {
        "select": {
          "success": true,
          "message": "SELECT OK"
        },
        "insert": {
          "success": true,
          "message": "INSERT OK",
          "data_used": {
            "created_at": "2025-09-04T16:03:20.116Z",
            "updated_at": "2025-09-04T16:03:20.116Z",
            "tenant_id": 1,
            "data": {
              "test": true,
              "table": "user_help_stats",
              "id": "final_te"
            }
          }
        },
        "update": {
          "success": true,
          "message": "UPDATE OK"
        },
        "delete": {
          "success": true,
          "message": "DELETE OK"
        }
      },
      "tested_at": "2025-09-04T16:03:19.935Z"
    },
    "user_notifications": {
      "table_name": "user_notifications",
      "select_success": true,
      "insert_success": true,
      "update_success": true,
      "delete_success": true,
      "rls_detected": false,
      "primary_error": null,
      "operations": {
        "select": {
          "success": true,
          "message": "SELECT OK"
        },
        "insert": {
          "success": true,
          "message": "INSERT OK",
          "data_used": {
            "created_at": "2025-09-04T16:03:21.001Z",
            "updated_at": "2025-09-04T16:03:21.001Z",
            "tenant_id": 1,
            "data": {
              "test": true,
              "table": "user_notifications",
              "id": "final_te"
            }
          }
        },
        "update": {
          "success": true,
          "message": "UPDATE OK"
        },
        "delete": {
          "success": true,
          "message": "DELETE OK"
        }
      },
      "tested_at": "2025-09-04T16:03:20.809Z"
    },
    "user_preferences": {
      "table_name": "user_preferences",
      "select_success": false,
      "insert_success": false,
      "update_success": false,
      "delete_success": false,
      "rls_detected": false,
      "primary_error": "unrecognized configuration parameter \"rls.tenant_id\"",
      "operations": {
        "select": {
          "success": false,
          "message": "unrecognized configuration parameter \"rls.tenant_id\""
        }
      },
      "tested_at": "2025-09-04T16:03:21.688Z"
    },
    "user_sessions": {
      "table_name": "user_sessions",
      "select_success": true,
      "insert_success": false,
      "update_success": false,
      "delete_success": false,
      "rls_detected": false,
      "primary_error": null,
      "operations": {
        "select": {
          "success": true,
          "message": "SELECT OK"
        },
        "insert": {
          "success": false,
          "message": "Could not find the 'data' column of 'user_sessions' in the schema cache",
          "data_used": {
            "created_at": "2025-09-04T16:03:22.257Z",
            "updated_at": "2025-09-04T16:03:22.257Z",
            "tenant_id": 1,
            "data": {
              "test": true,
              "table": "user_sessions",
              "id": "final_te"
            }
          }
        }
      },
      "tested_at": "2025-09-04T16:03:22.020Z"
    },
    "users": {
      "table_name": "users",
      "select_success": true,
      "insert_success": false,
      "update_success": false,
      "delete_success": false,
      "rls_detected": false,
      "primary_error": null,
      "operations": {
        "select": {
          "success": true,
          "message": "SELECT OK"
        },
        "insert": {
          "success": false,
          "message": "null value in column \"hashed_password\" of relation \"users\" violates not-null constraint",
          "data_used": {
            "created_at": "2025-09-04T16:03:22.756Z",
            "updated_at": "2025-09-04T16:03:22.756Z",
            "username": "user_final_te_1757001802756",
            "email": "test_final_te@finaltest.com",
            "first_name": "Test",
            "last_name": "User",
            "is_active": true
          }
        }
      },
      "tested_at": "2025-09-04T16:03:22.580Z"
    },
    "usuarios": {
      "table_name": "usuarios",
      "select_success": true,
      "insert_success": false,
      "update_success": false,
      "delete_success": false,
      "rls_detected": true,
      "primary_error": null,
      "operations": {
        "select": {
          "success": true,
          "message": "SELECT OK"
        },
        "insert": {
          "success": false,
          "message": "new row violates row-level security policy for table \"usuarios\"",
          "data_used": {
            "created_at": "2025-09-04T16:03:23.313Z",
            "updated_at": "2025-09-04T16:03:23.313Z",
            "email": "usuario_final_te@finaltest.com",
            "rol": "USER",
            "first_name": "Test",
            "last_name": "Usuario",
            "is_active": true
          },
          "rls_blocked": true
        }
      },
      "tested_at": "2025-09-04T16:03:23.114Z"
    }
  },
  "functional_analysis": {
    "total_critical_tables": 40,
    "fully_functional": 8,
    "read_only_rls": 3,
    "completely_blocked": 29,
    "functionality_score": 28
  },
  "functional_tables": [
    {
      "table": "compliance_records",
      "status": "FULLY_FUNCTIONAL",
      "operations_working": 4
    },
    {
      "table": "compliance_reports",
      "status": "FULLY_FUNCTIONAL",
      "operations_working": 4
    },
    {
      "table": "dpa_documents",
      "status": "FULLY_FUNCTIONAL",
      "operations_working": 4
    },
    {
      "table": "eipd_documents",
      "status": "FULLY_FUNCTIONAL",
      "operations_working": 4
    },
    {
      "table": "mapeo_datos_rat",
      "status": "FULLY_FUNCTIONAL",
      "operations_working": 4
    },
    {
      "table": "organizaciones",
      "status": "READ_ONLY_RLS",
      "operations_working": 1
    },
    {
      "table": "proveedores",
      "status": "READ_ONLY_RLS",
      "operations_working": 1
    },
    {
      "table": "system_config",
      "status": "FULLY_FUNCTIONAL",
      "operations_working": 4
    },
    {
      "table": "user_help_stats",
      "status": "FULLY_FUNCTIONAL",
      "operations_working": 4
    },
    {
      "table": "user_notifications",
      "status": "FULLY_FUNCTIONAL",
      "operations_working": 4
    },
    {
      "table": "usuarios",
      "status": "READ_ONLY_RLS",
      "operations_working": 1
    }
  ],
  "blocked_tables": [
    {
      "table": "actividades_dpo",
      "status": "BLOCKED",
      "reason": "Sin acceso"
    },
    {
      "table": "activities",
      "status": "BLOCKED",
      "reason": "Sin acceso"
    },
    {
      "table": "agent_activity_log",
      "status": "BLOCKED",
      "reason": "Sin acceso"
    },
    {
      "table": "audit_log",
      "status": "BLOCKED",
      "reason": "Sin acceso"
    },
    {
      "table": "audit_logs",
      "status": "BLOCKED",
      "reason": "Sin acceso"
    },
    {
      "table": "categories",
      "status": "BLOCKED",
      "reason": "Sin acceso"
    },
    {
      "table": "documentos_generados",
      "status": "BLOCKED",
      "reason": "Sin acceso"
    },
    {
      "table": "dpas",
      "status": "BLOCKED",
      "reason": "Sin acceso"
    },
    {
      "table": "dpia",
      "status": "BLOCKED",
      "reason": "Sin acceso"
    },
    {
      "table": "dpo_notifications",
      "status": "BLOCKED",
      "reason": "Sin acceso"
    },
    {
      "table": "empresas",
      "status": "BLOCKED",
      "reason": "Sin acceso"
    },
    {
      "table": "evaluaciones_impacto",
      "status": "BLOCKED",
      "reason": "Sin acceso"
    },
    {
      "table": "generated_documents",
      "status": "BLOCKED",
      "reason": "Sin acceso"
    },
    {
      "table": "legal_articles",
      "status": "BLOCKED",
      "reason": "Sin acceso"
    },
    {
      "table": "notifications",
      "status": "BLOCKED",
      "reason": "Sin acceso"
    },
    {
      "table": "partner_access_logs",
      "status": "BLOCKED",
      "reason": "Sin acceso"
    },
    {
      "table": "rat_proveedores",
      "status": "BLOCKED",
      "reason": "Sin acceso"
    },
    {
      "table": "rats",
      "status": "BLOCKED",
      "reason": "Sin acceso"
    },
    {
      "table": "reports",
      "status": "BLOCKED",
      "reason": "Sin acceso"
    },
    {
      "table": "system_alerts",
      "status": "BLOCKED",
      "reason": "Sin acceso"
    },
    {
      "table": "system_error_logs",
      "status": "BLOCKED",
      "reason": "unrecognized configuration parameter \"rls.tenant_id\""
    },
    {
      "table": "tenant_configs",
      "status": "BLOCKED",
      "reason": "Sin acceso"
    },
    {
      "table": "tenant_limits",
      "status": "BLOCKED",
      "reason": "Sin acceso"
    },
    {
      "table": "tenant_settings",
      "status": "BLOCKED",
      "reason": "Sin acceso"
    },
    {
      "table": "tenant_usage",
      "status": "BLOCKED",
      "reason": "Sin acceso"
    },
    {
      "table": "tenants",
      "status": "BLOCKED",
      "reason": "Sin acceso"
    },
    {
      "table": "user_preferences",
      "status": "BLOCKED",
      "reason": "unrecognized configuration parameter \"rls.tenant_id\""
    },
    {
      "table": "user_sessions",
      "status": "BLOCKED",
      "reason": "Sin acceso"
    },
    {
      "table": "users",
      "status": "BLOCKED",
      "reason": "Sin acceso"
    }
  ],
  "recommendations": [
    "Ejecutar comandos SQL RLS para desbloquear tablas críticas",
    "Configurar políticas RLS permisivas para desarrollo",
    "Implementar sistema de autenticación para acceso completo",
    "Simplificar esquema eliminando 72 tablas innecesarias identificadas"
  ],
  "next_steps": [
    "Ejecutar comandos SQL RLS como administrador",
    "Re-ejecutar testing después de configurar RLS",
    "Implementar autenticación de usuarios para RLS",
    "Configurar datos iniciales en tablas funcionales"
  ]
}